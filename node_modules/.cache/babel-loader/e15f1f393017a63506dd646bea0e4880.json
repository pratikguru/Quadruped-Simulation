{"ast":null,"code":"import _possibleConstructorReturn from\"/Users/user/Desktop/Thesis/mine/Code/Quadruped-Simulation-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/user/Desktop/Thesis/mine/Code/Quadruped-Simulation-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/user/Desktop/Thesis/mine/Code/Quadruped-Simulation-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _classCallCheck from\"/Users/user/Desktop/Thesis/mine/Code/Quadruped-Simulation-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/user/Desktop/Thesis/mine/Code/Quadruped-Simulation-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _taggedTemplateLiteral from\"/Users/user/Desktop/Thesis/mine/Code/Quadruped-Simulation-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  background-color: rgba(255, 255, 255, 0.2);\\n  border-radius: 5px;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{Component}from\"react\";import styled from\"styled-components\";import Plot from\"react-plotly.js\";export var Container=styled.div(_templateObject());var Joint=/*#__PURE__*/function(){function Joint(link_1,link_2,link_3,theta_1,theta_2,theta_3,link_1_mass,link_2_mass,link_3_mass,name){_classCallCheck(this,Joint);this.joint={theta_1:theta_1,theta_2:theta_2,theta_3:theta_3,link_1:link_1,link_2:link_2,link_3:link_3,name:name,link_1_mass:link_1_mass,link_2_mass:link_2_mass,link_3_mass:link_3_mass,total_mass:this.link_1_mass+this.link_2_mass+this.link_3_mass};}_createClass(Joint,[{key:\"rad2deg\",value:function rad2deg(value){var pi=Math.PI;return value*(180/pi);}},{key:\"deg2rad\",value:function deg2rad(degrees){var pi=Math.PI;return degrees*(pi/180);}},{key:\"printJoint\",value:function printJoint(){console.log(\"Link 1: \"+this.theta_1);console.log(\"link 2: \"+this.theta_2);console.log(\"link 3: \"+this.theta_3);}}]);return Joint;}();var Robot=/*#__PURE__*/function(){function Robot(){_classCallCheck(this,Robot);this.bodyRadius=0;}_createClass(Robot,[{key:\"getRobotBody\",value:function getRobotBody(rads){//[ -50, 50, 50, -50, -50 ], [ -50, -50, 50, 50, -50 ], [0, 0, 0, 0, 0]\nvar x=[-rads,rads,rads,-rads,-rads];var y=[-rads,-rads,rads,rads,-rads];var z=[0,0,0,0,0];return{x:x,y:y,z:z};}},{key:\"_filterEndPoint\",value:function _filterEndPoint(point_set){return[[point_set[0][0][3],point_set[0][1][3],point_set[0][2][3]],[point_set[1][0][3],point_set[1][1][3],point_set[1][2][3]],[point_set[2][0][3],point_set[2][1][3],point_set[2][2][3]]];}},{key:\"_multiplyMatrices\",value:function _multiplyMatrices(firstArray,secondArray){var resultingArray=[];var n=4;for(var i=0;i<n;i++){resultingArray.push([]);for(var j=0;j<n;j++){resultingArray[i][j]=0;for(var k=0;k<n;k++){resultingArray[i][j]+=firstArray[i][k]*secondArray[k][j];}}}return resultingArray;}},{key:\"getPointFK\",value:function getPointFK(joint,point){var T0_1=[[Math.cos(joint.theta_1),-Math.sin(joint.theta_1),0,0],[Math.sin(joint.theta_1),Math.cos(joint.theta_1),0,0],[0,0,1,0],[0,0,0,1]];var T0_2=[[Math.cos(joint.theta_2),-Math.sin(joint.theta_2),0,joint.link_1],[0,0,-1,0],[Math.sin(joint.theta_2),Math.cos(joint.theta_2),0,0],[0,0,0,1]];var T0_3=[[Math.cos(joint.theta_3),-Math.sin(joint.theta_3),0,joint.link_2],[Math.sin(joint.theta_3),Math.cos(joint.theta_3),0,0],[0,0,1,0],[0,0,0,1]];var T0_4=[[1,0,0,joint.link_3],[0,1,0,0],[0,0,1,0],[0,0,0,1]];var point_set_1=this._multiplyMatrices(T0_1,T0_2);var point_set_2=this._multiplyMatrices(point_set_1,T0_3);var point_set_3=this._multiplyMatrices(point_set_2,T0_4);var coords={0:[point_set_1[0][3],point_set_1[1][3],point_set_1[2][3]],1:[point_set_2[0][3],point_set_2[1][3],point_set_2[2][3]],2:[point_set_3[0][3],point_set_3[1][3],point_set_3[2][3]]};return coords[point];}},{key:\"getFK\",value:function getFK(joint){var T0_1=[[Math.cos(joint.theta_1),-Math.sin(joint.theta_1),0,0],[Math.sin(joint.theta_1),Math.cos(joint.theta_1),0,0],[0,0,1,0],[0,0,0,1]];var T0_2=[[Math.cos(joint.theta_2),-Math.sin(joint.theta_2),0,joint.link_1],[0,0,-1,0],[Math.sin(joint.theta_2),Math.cos(joint.theta_2),0,0],[0,0,0,1]];var T0_3=[[Math.cos(joint.theta_3),-Math.sin(joint.theta_3),0,joint.link_2],[Math.sin(joint.theta_3),Math.cos(joint.theta_3),0,0],[0,0,1,0],[0,0,0,1]];var T0_4=[[1,0,0,joint.link_3],[0,1,0,0],[0,0,1,0],[0,0,0,1]];var point_set_1=this._multiplyMatrices(T0_1,T0_2);var point_set_2=this._multiplyMatrices(point_set_1,T0_3);var point_set_3=this._multiplyMatrices(point_set_2,T0_4);return this._filterEndPoint([point_set_1,point_set_2,point_set_3]);}},{key:\"getIK\",value:function getIK(x,y,z,joint){var theta_1=Math.atan2(y,x);var A=z;var B=Math.cos(theta_1)*x+y*Math.sin(theta_1)-joint.link_1;var C=(Math.pow(A,2)+Math.pow(B,2)-Math.pow(joint.link_3,2)-Math.pow(joint.link_2,2))/(2*joint.link_3*joint.link_2);var theta_3=Math.atan2(Math.sqrt(1-Math.pow(C,2)),C);var D=Math.cos(theta_3)*joint.link_3+joint.link_2;var E=Math.sin(theta_3)*joint.link_3;var numerator=(A*D-B*E)/(Math.pow(E,2)+Math.pow(D,2));var denominator=1-Math.pow(numerator,2);var theta_2=Math.atan2(numerator,Math.sqrt(denominator));joint.theta_1=joint.rad2deg(theta_1);joint.theta_2=joint.rad2deg(theta_2);joint.theta_3=joint.rad2deg(theta_3);return joint;}},{key:\"getFrame\",value:function getFrame(frameCount,props){}}]);return Robot;}();var PlotArea=/*#__PURE__*/function(_Component){_inherits(PlotArea,_Component);function PlotArea(_props){var _this;_classCallCheck(this,PlotArea);_this=_possibleConstructorReturn(this,_getPrototypeOf(PlotArea).call(this));_this.preapreJointIK=function(leg,joint,prop,length){switch(leg){case 1:{joint.theta_1=-joint.deg2rad(prop.theta_1);joint.theta_2=-joint.deg2rad(prop.theta_2);joint.theta_3=-joint.deg2rad(prop.theta_3);joint.link_1=length===null||length===void 0?void 0:length.coxa;joint.link_2=length===null||length===void 0?void 0:length.tibia;joint.link_3=length===null||length===void 0?void 0:length.femur;break;}case 2:{joint.theta_1=-joint.deg2rad(prop.theta_1);joint.theta_2=-joint.deg2rad(prop.theta_2);joint.theta_3=-joint.deg2rad(prop.theta_3);joint.link_1=length===null||length===void 0?void 0:length.coxa;joint.link_2=length===null||length===void 0?void 0:length.tibia;joint.link_3=length===null||length===void 0?void 0:length.femur;break;}case 3:{joint.theta_1=-joint.deg2rad(prop.theta_1);joint.theta_2=-joint.deg2rad(prop.theta_2);joint.theta_3=-joint.deg2rad(prop.theta_3);joint.link_1=length===null||length===void 0?void 0:length.coxa;joint.link_2=length===null||length===void 0?void 0:length.tibia;joint.link_3=length===null||length===void 0?void 0:length.femur;break;}case 4:{joint.theta_1=-joint.deg2rad(prop.theta_1);joint.theta_2=-joint.deg2rad(prop.theta_2);joint.theta_3=-joint.deg2rad(prop.theta_3);joint.link_1=length===null||length===void 0?void 0:length.coxa;joint.link_2=length===null||length===void 0?void 0:length.tibia;joint.link_3=length===null||length===void 0?void 0:length.femur;break;}default:{}}return joint;};_this.prepareJointFK=function(leg,joint,props,length){switch(leg){case 1:{joint.theta_1=-joint.deg2rad(props[0][0]);joint.theta_2=-joint.deg2rad(180-props[0][1]-90);joint.theta_3=-joint.deg2rad(180-props[0][2]-90);joint.link_1=length.coxa;joint.link_2=length.tibia;joint.link_3=length.femur;break;}case 2:{joint.theta_1=-joint.deg2rad(180-props[1][0]);joint.theta_2=-joint.deg2rad(180-props[1][1]-90);joint.theta_3=-joint.deg2rad(180-props[1][2]-90);joint.link_1=length.coxa;joint.link_2=length.tibia;joint.link_3=length.femur;break;}case 3:{joint.theta_1=-joint.deg2rad(props[2][0]-180);joint.theta_2=-joint.deg2rad(180-props[2][1]-90);joint.theta_3=-joint.deg2rad(180-props[2][2]-90);joint.link_1=length.coxa;joint.link_2=length.tibia;joint.link_3=length.femur;break;}case 4:{joint.theta_1=-joint.deg2rad(props[3][0]-180);joint.theta_2=-joint.deg2rad(180-props[3][1]-90);joint.theta_3=-joint.deg2rad(180-props[3][2]-90);joint.link_1=length.coxa;joint.link_2=length.tibia;joint.link_3=length.femur;break;}}return joint;};_this.handleRotation=function(rotation,currentPoint){var theta_1=_this.deg2rad(rotation.rotX);var theta_2=_this.deg2rad(rotation.rotY);var theta_3=_this.deg2rad(rotation.rotZ);var x=currentPoint.x;var y=currentPoint.y;var z=currentPoint.z;var rotationMatrix=[y*(Math.cos(theta_1)*Math.sin(theta_3)+Math.cos(theta_3)*Math.sin(theta_1)*Math.sin(theta_2))+z*(Math.sin(theta_1)*Math.sin(theta_3)-Math.cos(theta_1)*Math.cos(theta_3)*Math.sin(theta_2))+x*Math.cos(theta_2)*Math.cos(theta_3),y*(Math.cos(theta_1)*Math.cos(theta_3)-Math.sin(theta_1)*Math.sin(theta_2)*Math.sin(theta_3))+z*(Math.cos(theta_3)*Math.sin(theta_1)+Math.cos(theta_1)*Math.sin(theta_2)*Math.sin(theta_3))-x*Math.cos(theta_2)*Math.sin(theta_3),x*Math.sin(theta_2)+z*Math.cos(theta_1)*Math.cos(theta_2)-y*Math.cos(theta_2)*Math.sin(theta_1)];return{x:rotationMatrix[0],y:rotationMatrix[1],z:rotationMatrix[2]};};_this.getGeneratedMesh=function(){var mesh={x:[_this.endEffectorPoints[0][0],_this.endEffectorPoints[1][0],_this.endEffectorPoints[2][0],_this.endEffectorPoints[3][0]],y:[-_this.endEffectorPoints[0][1],-_this.endEffectorPoints[1][1],-_this.endEffectorPoints[2][1],-_this.endEffectorPoints[3][1]],z:[-_this.endEffectorPoints[0][2],-_this.endEffectorPoints[1][2],-_this.endEffectorPoints[2][2],-_this.endEffectorPoints[3][2]]};return mesh;};_this.getCOMVector=function(leg,joint,point){joint.link_1_mass=250/1000;joint.link_2_mass=250/1000;joint.link_3_mass=350/1000;joint.total_mass=joint.link_1_mass+joint.link_2_mass+joint.link_3_mass;var x_0=leg[0][point];var x_1=leg[1][point];var x_2=leg[2][point];var points=(joint.link_1_mass*x_0+joint.link_2_mass*x_1+joint.link_3_mass*x_2)/joint.total_mass;return points;};_this.getCOMPoint=function(points,joint){joint[0].total_mass=0.25+0.25+0.35;joint[1].total_mass=0.25+0.25+0.35;joint[2].total_mass=0.25+0.25+0.35;joint[3].total_mass=0.25+0.25+0.35;var total_centre_of_mass=(points[0]*joint[0].total_mass+points[1]*joint[1].total_mass+points[2]*joint[2].total_mass+points[3]*joint[3].total_mass)/joint[0].total_mass+joint[1].total_mass+joint[2].total_mass+joint[3].total_mass;return total_centre_of_mass/4;};_this.bot=new Robot(_props);_this.joint_1=new Joint(120,110,120,0,0,0,250,250,350);_this.joint_2=new Joint(120,110,120,0,0,0,250,250,350);_this.joint_3=new Joint(120,110,120,0,0,0,250,250,350);_this.joint_4=new Joint(120,110,120,0,0,0,250,250,350);_this.endEffectorPoints=[[],[],[],[]];if(_props.choice){_this.leg_1=_this.bot.getFK(_this.prepareJointFK(1,_this.joint_1,_props.fk,_props.lengths));_this.leg_2=_this.bot.getFK(_this.prepareJointFK(2,_this.joint_2,_props.fk,_props.lengths));_this.leg_3=_this.bot.getFK(_this.prepareJointFK(3,_this.joint_3,_props.fk,_props.lengths));_this.leg_4=_this.bot.getFK(_this.prepareJointFK(4,_this.joint_4,_props.fk,_props.lengths));}else{_this.leg_1=_this.bot.getFK(_this.preapreJointIK(1,_this.joint_1,_this.bot.getIK(_props.ik[0][0],_props.ik[0][1],_props.ik[0][2]||_props.frameCount,_this.joint_1)));_this.leg_2=_this.bot.getFK(_this.preapreJointIK(2,_this.joint_2,_this.bot.getIK(_props.ik[1][0],_props.ik[1][1],_props.ik[1][2],_this.joint_2)));_this.leg_3=_this.bot.getFK(_this.preapreJointIK(3,_this.joint_3,_this.bot.getIK(_props.ik[2][0],_props.ik[2][1],_props.ik[2][2],_this.joint_3)));_this.leg_4=_this.bot.getFK(_this.preapreJointIK(4,_this.joint_4,_this.bot.getIK(_props.ik[3][0],_props.ik[3][1],_props.ik[3][2],_this.joint_4)));}_this.state={bodyDimension:_this.bot.getRobotBody(_props.radius),showCogVectorTrace:false,endEffectorPoints:[],showCogPoints:false,showBodyCogVectorTrace:false};return _this;}_createClass(PlotArea,[{key:\"componentDidMount\",value:function componentDidMount(){// if (this.props.choice === \"IK\") {\n//   for (let i = 0; i < 100; i++) {\n//     this.leg_1 = this.bot.getFK(\n//       this.preapreJointIK(\n//         1,\n//         this.joint_1,\n//         this.bot.getIK(\n//           this.props.ik[0][0],\n//           this.props.ik[0][1],\n//           i,\n//           this.joint_1\n//         ),\n//         this.props.lengths\n//       )\n//     );\n//   }\n// }\n}},{key:\"deg2rad\",value:function deg2rad(degrees){var pi=Math.PI;return degrees*(pi/180);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){this.setState({bodyDimension:this.bot.getRobotBody(nextProps.radius),showCogVectorTrace:nextProps.showCogVectorTrace,showBodyCogVectorTrace:nextProps.showBodyCogVectorTrace,showCogPoints:nextProps.showCogPoints});if(nextProps.choice){this.leg_1=this.bot.getFK(this.prepareJointFK(1,this.joint_1,nextProps.fk,nextProps.lengths));this.leg_2=this.bot.getFK(this.prepareJointFK(2,this.joint_2,nextProps.fk,nextProps.lengths));this.leg_3=this.bot.getFK(this.prepareJointFK(3,this.joint_3,nextProps.fk,nextProps.lengths));this.leg_4=this.bot.getFK(this.prepareJointFK(4,this.joint_4,nextProps.fk,nextProps.lengths));this.endEffectorPoints=[[this.leg_1[2][0]-nextProps.translations.transX,-this.leg_1[2][1]-nextProps.translations.transY,-this.leg_1[2][2]-nextProps.translations.transZ],[this.leg_2[2][0]-nextProps.translations.transX,-this.leg_2[2][1]-nextProps.translations.transY,-this.leg_2[2][2]-nextProps.translations.transZ],[this.leg_3[2][0]-nextProps.translations.transX,-this.leg_3[2][1]-nextProps.translations.transY,-this.leg_3[2][2]-nextProps.translations.transZ],[this.leg_4[2][0]-nextProps.translations.transX,-this.leg_4[2][1]-nextProps.translations.transY,-this.leg_4[2][2]-nextProps.translations.transZ]];}else{this.endEffectorPoints=[[this.handleRotation(nextProps.rotations,{x:nextProps.ik[0][0],y:nextProps.ik[0][1],z:nextProps.ik[0][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[0][0],y:nextProps.ik[0][1],z:nextProps.ik[0][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[0][0],y:nextProps.ik[0][1],z:nextProps.ik[0][2]}).z-nextProps.translations.transZ],[this.handleRotation(nextProps.rotations,{x:nextProps.ik[1][0],y:nextProps.ik[1][1],z:nextProps.ik[1][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[1][0],y:nextProps.ik[1][1],z:nextProps.ik[1][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[1][0],y:nextProps.ik[1][1],z:nextProps.ik[1][2]}).z-nextProps.translations.transZ],[this.handleRotation(nextProps.rotations,{x:nextProps.ik[2][0],y:nextProps.ik[2][1],z:nextProps.ik[2][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[2][0],y:nextProps.ik[2][1],z:nextProps.ik[2][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[2][0],y:nextProps.ik[2][1],z:nextProps.ik[2][2]}).z-nextProps.translations.transZ],[this.handleRotation(nextProps.rotations,{x:nextProps.ik[3][0],y:nextProps.ik[3][1],z:nextProps.ik[3][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[3][0],y:nextProps.ik[3][1],z:nextProps.ik[3][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[3][0],y:nextProps.ik[3][1],z:nextProps.ik[3][2]}).z-nextProps.translations.transZ]];this.leg_1=this.bot.getFK(this.preapreJointIK(1,this.joint_1,this.bot.getIK(this.handleRotation(nextProps.rotations,{x:nextProps.ik[0][0],y:nextProps.ik[0][1],z:nextProps.ik[0][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[0][0],y:nextProps.ik[0][1],z:nextProps.ik[0][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[0][0],y:nextProps.ik[0][1],z:nextProps.ik[0][2]}).z-nextProps.translations.transZ,this.joint_1),nextProps.lengths));this.leg_2=this.bot.getFK(this.preapreJointIK(2,this.joint_2,this.bot.getIK(this.handleRotation(nextProps.rotations,{x:nextProps.ik[1][0],y:nextProps.ik[1][1],z:nextProps.ik[1][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[1][0],y:nextProps.ik[1][1],z:nextProps.ik[1][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[1][0],y:nextProps.ik[1][1],z:nextProps.ik[1][2]}).z-nextProps.translations.transZ,this.joint_2),nextProps.lengths));this.leg_3=this.bot.getFK(this.preapreJointIK(3,this.joint_3,this.bot.getIK(this.handleRotation(nextProps.rotations,{x:nextProps.ik[2][0],y:nextProps.ik[2][1],z:nextProps.ik[2][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[2][0],y:nextProps.ik[2][1],z:nextProps.ik[2][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[2][0],y:nextProps.ik[2][1],z:nextProps.ik[2][2]}).z-nextProps.translations.transZ,this.joint_3),nextProps.lengths));this.leg_4=this.bot.getFK(this.preapreJointIK(4,this.joint_4,this.bot.getIK(this.handleRotation(nextProps.rotations,{x:nextProps.ik[3][0],y:nextProps.ik[3][1],z:nextProps.ik[3][2]}).x-nextProps.translations.transX,this.handleRotation(nextProps.rotations,{x:nextProps.ik[3][0],y:nextProps.ik[3][1],z:nextProps.ik[3][2]}).y-nextProps.translations.transY,this.handleRotation(nextProps.rotations,{x:nextProps.ik[3][0],y:nextProps.ik[3][1],z:nextProps.ik[3][2]}).z-nextProps.translations.transZ,this.joint_4),nextProps.lengths));}}},{key:\"render\",value:function render(){return React.createElement(Container,null,React.createElement(Plot,{data:[{x:this.state.bodyDimension.x,y:this.state.bodyDimension.y,z:this.state.bodyDimension.z,type:\"mesh3d\",mode:\"lines+markers\",line:{width:6,colorscale:\"Viridis\"},marker:{size:3.5,colorscale:\"Greens\",cmin:-20,cmax:50}},{// LEG 1\nx:[0,this.leg_1[0][0],this.leg_1[1][0],this.leg_1[2][0]],y:[0,this.leg_1[0][1],this.leg_1[1][1],this.leg_1[2][1]],z:[0,this.leg_1[0][2],this.leg_1[1][2],this.leg_1[2][2]],type:\"scatter3d\",mode:\"lines+markers\",line:{width:6,colorscale:\"Viridis\"},marker:{size:3.5,colorscale:\"Reds\",cmin:-20,cmax:50}},{// LEG 2\nx:[0,this.leg_2[0][0],this.leg_2[1][0],this.leg_2[2][0]],y:[0,this.leg_2[0][1],this.leg_2[1][1],this.leg_2[2][1]],z:[0,this.leg_2[0][2],this.leg_2[1][2],this.leg_2[2][2]],type:\"scatter3d\",mode:\"lines+markers\",line:{width:6,colorscale:\"Viridis\"},marker:{size:3.5,colorscale:\"Greens\",cmin:-20,cmax:50}},{// LEG 3\nx:[0,this.leg_3[0][0],this.leg_3[1][0],this.leg_3[2][0]],y:[0,this.leg_3[0][1],this.leg_3[1][1],this.leg_3[2][1]],z:[0,this.leg_3[0][2],this.leg_3[1][2],this.leg_3[2][2]],type:\"scatter3d\",mode:\"lines+markers\",line:{width:6,colorscale:\"Viridis\"},marker:{size:3.5,colorscale:\"Greens\",cmin:-20,cmax:50}},{// LEG 4\nx:[0,this.leg_4[0][0],this.leg_4[1][0],this.leg_4[2][0]],y:[0,this.leg_4[0][1],this.leg_4[1][1],this.leg_4[2][1]],z:[0,this.leg_4[0][2],this.leg_4[1][2],this.leg_4[2][2]],type:\"scatter3d\",mode:\"lines+markers\",line:{width:6,colorscale:\"Viridis\"},marker:{size:3.5,colorscale:\"Greens\",cmin:-20,cmax:50}},{// LEG 1 CG POINTS\nx:this.state.showCogVectorTrace?[0,this.leg_1[0][0],0,this.leg_1[1][0],0,this.leg_1[2][0],0,this.leg_2[0][0],0,this.leg_2[1][0],0,this.leg_2[2][0],0,this.leg_3[0][0],0,this.leg_3[1][0],0,this.leg_3[2][0],0,this.leg_4[0][0],0,this.leg_4[1][0],0,this.leg_4[2][0]]:[],y:this.state.showCogVectorTrace?[0,this.leg_1[0][1],0,this.leg_1[1][1],0,this.leg_1[2][1],0,this.leg_2[0][1],0,this.leg_2[1][1],0,this.leg_2[2][1],0,this.leg_3[0][1],0,this.leg_3[1][1],0,this.leg_3[2][1],0,this.leg_4[0][1],0,this.leg_4[1][1],0,this.leg_4[2][1]]:[],z:this.state.showCogVectorTrace?[0,this.leg_1[0][2],0,this.leg_1[1][2],0,this.leg_1[2][2],0,this.leg_2[0][2],0,this.leg_2[1][2],0,this.leg_2[2][2],0,this.leg_3[0][2],0,this.leg_3[1][2],0,this.leg_3[2][2],0,this.leg_4[0][2],0,this.leg_4[1][2],0,this.leg_4[2][2]]:[],type:\"scatter3d\",mode:\"lines+markers\",line:{width:3,colorscale:\"Viridis\"},marker:{size:3.5,colorscale:\"Reds\",cmin:-20,cmax:50}},{x:this.state.showCogPoints?[this.getCOMVector(this.leg_1,this.joint_1,0),this.getCOMVector(this.leg_2,this.joint_2,0),this.getCOMVector(this.leg_3,this.joint_3,0),this.getCOMVector(this.leg_4,this.joint_4,0)]:[],y:this.state.showCogPoints?[this.getCOMVector(this.leg_1,this.joint_1,1),this.getCOMVector(this.leg_2,this.joint_2,1),this.getCOMVector(this.leg_3,this.joint_3,1),this.getCOMVector(this.leg_4,this.joint_4,1)]:[],z:this.state.showCogPoints?[this.getCOMVector(this.leg_1,this.joint_1,2),this.getCOMVector(this.leg_2,this.joint_2,2),this.getCOMVector(this.leg_3,this.joint_3,2),this.getCOMVector(this.leg_4,this.joint_4,2)]:[],mode:\"markers\",type:\"scatter3d\",marker:{color:\"rgba(255, 0, 0, 0.8)\",size:4}},{x:this.state.showCogPoints?[0,this.getCOMPoint([this.getCOMVector(this.leg_1,this.joint_1,0),this.getCOMVector(this.leg_2,this.joint_2,0),this.getCOMVector(this.leg_3,this.joint_3,0),this.getCOMVector(this.leg_4,this.joint_4,0)],[this.joint_1,this.joint_2,this.joint_3,this.joint_4])]:[],y:this.state.showCogPoints?[0,this.getCOMPoint([this.getCOMVector(this.leg_1,this.joint_1,1),this.getCOMVector(this.leg_2,this.joint_2,1),this.getCOMVector(this.leg_3,this.joint_3,1),this.getCOMVector(this.leg_4,this.joint_4,1)],[this.joint_1,this.joint_2,this.joint_3,this.joint_4])]:[],z:this.state.showCogPoints?[0,this.getCOMPoint([this.getCOMVector(this.leg_1,this.joint_1,2),this.getCOMVector(this.leg_2,this.joint_2,2),this.getCOMVector(this.leg_3,this.joint_3,2),this.getCOMVector(this.leg_4,this.joint_4,2)],[this.joint_1,this.joint_2,this.joint_3,this.joint_4])]:[],mode:\"lines+markers\",type:\"scatter3d\",marker:{color:\"rgba(0, 0, 255, 0.8)\",size:4}},{x:this.props.showMesh?this.getGeneratedMesh().x:[0],y:this.props.showMesh?this.getGeneratedMesh().y:[0],z:this.props.showMesh?this.getGeneratedMesh().z:[0],color:\"rgb(300,100,200)\",type:\"mesh3d\",opacity:0.3}],layout:{autosize:false,height:999,width:1080,scene:{aspectmode:\"manual\",aspectratio:{x:1,y:1,z:1},xaxis:{nticks:9,range:[-350,350]},yaxis:{nticks:7,range:[-350,350]},zaxis:{nticks:10,range:[-350,350]}},legend:{bgcolor:\"#ffffff1c\",orientation:\"h\",font:{color:\"black\",family:\"Montserrat\"}},title:{text:\"Quadruped Simulation\",font:{family:\"Montserrat\",size:24,color:\"black\"},xref:\"paper\"}},frames:[{// LEG 1\nx:[0,this.leg_1[0][0],this.leg_1[1][0],this.leg_1[2][0]],y:[0,this.leg_1[0][1],this.leg_1[1][1],this.leg_1[2][1]],z:[0,this.leg_1[0][2],this.leg_1[1][2],this.leg_1[2][2]],type:\"scatter3d\",mode:\"lines+markers\",line:{width:6,colorscale:\"Viridis\"},marker:{size:3.5,colorscale:\"Reds\",cmin:-20,cmax:50}}]}));}}]);return PlotArea;}(Component);export{PlotArea as default};","map":{"version":3,"sources":["/Users/user/Desktop/Thesis/mine/Code/Quadruped-Simulation-/src/Components/PlotArea/mainPlot.js"],"names":["React","Component","styled","Plot","Container","div","Joint","link_1","link_2","link_3","theta_1","theta_2","theta_3","link_1_mass","link_2_mass","link_3_mass","name","joint","total_mass","value","pi","Math","PI","degrees","console","log","Robot","bodyRadius","rads","x","y","z","point_set","firstArray","secondArray","resultingArray","n","i","push","j","k","point","T0_1","cos","sin","T0_2","T0_3","T0_4","point_set_1","_multiplyMatrices","point_set_2","point_set_3","coords","_filterEndPoint","atan2","A","B","C","pow","sqrt","D","E","numerator","denominator","rad2deg","frameCount","props","PlotArea","preapreJointIK","leg","prop","length","deg2rad","coxa","tibia","femur","prepareJointFK","handleRotation","rotation","currentPoint","rotX","rotY","rotZ","rotationMatrix","getGeneratedMesh","mesh","endEffectorPoints","getCOMVector","x_0","x_1","x_2","points","getCOMPoint","total_centre_of_mass","bot","joint_1","joint_2","joint_3","joint_4","choice","leg_1","getFK","fk","lengths","leg_2","leg_3","leg_4","getIK","ik","state","bodyDimension","getRobotBody","radius","showCogVectorTrace","showCogPoints","showBodyCogVectorTrace","nextProps","setState","translations","transX","transY","transZ","rotations","type","mode","line","width","colorscale","marker","size","cmin","cmax","color","showMesh","opacity","autosize","height","scene","aspectmode","aspectratio","xaxis","nticks","range","yaxis","zaxis","legend","bgcolor","orientation","font","family","title","text","xref"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Plot from \"react-plotly.js\";\n\nexport const Container = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  background-color: rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nclass Joint {\n  constructor(\n    link_1,\n    link_2,\n    link_3,\n    theta_1,\n    theta_2,\n    theta_3,\n    link_1_mass,\n    link_2_mass,\n    link_3_mass,\n    name\n  ) {\n    this.joint = {\n      theta_1: theta_1,\n      theta_2: theta_2,\n      theta_3: theta_3,\n\n      link_1: link_1,\n      link_2: link_2,\n      link_3: link_3,\n      name: name,\n\n      link_1_mass: link_1_mass,\n      link_2_mass: link_2_mass,\n      link_3_mass: link_3_mass,\n      total_mass: this.link_1_mass + this.link_2_mass + this.link_3_mass,\n    };\n  }\n\n  rad2deg(value) {\n    var pi = Math.PI;\n    return value * (180 / pi);\n  }\n\n  deg2rad(degrees) {\n    var pi = Math.PI;\n    return degrees * (pi / 180);\n  }\n\n  printJoint() {\n    console.log(\"Link 1: \" + this.theta_1);\n    console.log(\"link 2: \" + this.theta_2);\n    console.log(\"link 3: \" + this.theta_3);\n  }\n}\n\nclass Robot {\n  constructor() {\n    this.bodyRadius = 0;\n  }\n\n  getRobotBody(rads) {\n    //[ -50, 50, 50, -50, -50 ], [ -50, -50, 50, 50, -50 ], [0, 0, 0, 0, 0]\n    let x = [-rads, rads, rads, -rads, -rads];\n    let y = [-rads, -rads, rads, rads, -rads];\n    let z = [0, 0, 0, 0, 0];\n    return {\n      x: x,\n      y: y,\n      z: z,\n    };\n  }\n\n  _filterEndPoint(point_set) {\n    return [\n      [point_set[0][0][3], point_set[0][1][3], point_set[0][2][3]],\n      [point_set[1][0][3], point_set[1][1][3], point_set[1][2][3]],\n      [point_set[2][0][3], point_set[2][1][3], point_set[2][2][3]],\n    ];\n  }\n\n  _multiplyMatrices(firstArray, secondArray) {\n    let resultingArray = [];\n    let n = 4;\n    for (let i = 0; i < n; i++) {\n      resultingArray.push([]);\n      for (let j = 0; j < n; j++) {\n        resultingArray[i][j] = 0;\n        for (let k = 0; k < n; k++) {\n          resultingArray[i][j] += firstArray[i][k] * secondArray[k][j];\n        }\n      }\n    }\n    return resultingArray;\n  }\n\n  getPointFK(joint, point) {\n    let T0_1 = [\n      [Math.cos(joint.theta_1), -Math.sin(joint.theta_1), 0, 0],\n      [Math.sin(joint.theta_1), Math.cos(joint.theta_1), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_2 = [\n      [Math.cos(joint.theta_2), -Math.sin(joint.theta_2), 0, joint.link_1],\n      [0, 0, -1, 0],\n      [Math.sin(joint.theta_2), Math.cos(joint.theta_2), 0, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_3 = [\n      [Math.cos(joint.theta_3), -Math.sin(joint.theta_3), 0, joint.link_2],\n      [Math.sin(joint.theta_3), Math.cos(joint.theta_3), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_4 = [\n      [1, 0, 0, joint.link_3],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let point_set_1 = this._multiplyMatrices(T0_1, T0_2);\n    let point_set_2 = this._multiplyMatrices(point_set_1, T0_3);\n    let point_set_3 = this._multiplyMatrices(point_set_2, T0_4);\n\n    let coords = {\n      0: [point_set_1[0][3], point_set_1[1][3], point_set_1[2][3]],\n      1: [point_set_2[0][3], point_set_2[1][3], point_set_2[2][3]],\n      2: [point_set_3[0][3], point_set_3[1][3], point_set_3[2][3]],\n    };\n\n    return coords[point];\n  }\n\n  getFK(joint) {\n    let T0_1 = [\n      [Math.cos(joint.theta_1), -Math.sin(joint.theta_1), 0, 0],\n      [Math.sin(joint.theta_1), Math.cos(joint.theta_1), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_2 = [\n      [Math.cos(joint.theta_2), -Math.sin(joint.theta_2), 0, joint.link_1],\n      [0, 0, -1, 0],\n      [Math.sin(joint.theta_2), Math.cos(joint.theta_2), 0, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_3 = [\n      [Math.cos(joint.theta_3), -Math.sin(joint.theta_3), 0, joint.link_2],\n      [Math.sin(joint.theta_3), Math.cos(joint.theta_3), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_4 = [\n      [1, 0, 0, joint.link_3],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let point_set_1 = this._multiplyMatrices(T0_1, T0_2);\n    let point_set_2 = this._multiplyMatrices(point_set_1, T0_3);\n    let point_set_3 = this._multiplyMatrices(point_set_2, T0_4);\n\n    return this._filterEndPoint([point_set_1, point_set_2, point_set_3]);\n  }\n\n  getIK(x, y, z, joint) {\n    let theta_1 = Math.atan2(y, x);\n    let A = z;\n    let B = Math.cos(theta_1) * x + y * Math.sin(theta_1) - joint.link_1;\n    let C =\n      (Math.pow(A, 2) +\n        Math.pow(B, 2) -\n        Math.pow(joint.link_3, 2) -\n        Math.pow(joint.link_2, 2)) /\n      (2 * joint.link_3 * joint.link_2);\n    let theta_3 = Math.atan2(Math.sqrt(1 - Math.pow(C, 2)), C);\n    let D = Math.cos(theta_3) * joint.link_3 + joint.link_2;\n    let E = Math.sin(theta_3) * joint.link_3;\n\n    let numerator = (A * D - B * E) / (Math.pow(E, 2) + Math.pow(D, 2));\n    let denominator = 1 - Math.pow(numerator, 2);\n\n    let theta_2 = Math.atan2(numerator, Math.sqrt(denominator));\n\n    joint.theta_1 = joint.rad2deg(theta_1);\n    joint.theta_2 = joint.rad2deg(theta_2);\n    joint.theta_3 = joint.rad2deg(theta_3);\n\n    return joint;\n  }\n\n  getFrame(frameCount, props) {}\n}\n\nexport default class PlotArea extends Component {\n  constructor(props) {\n    super();\n    this.bot = new Robot(props);\n    this.joint_1 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_2 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_3 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_4 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n\n    this.endEffectorPoints = [[], [], [], []];\n\n    if (props.choice) {\n      this.leg_1 = this.bot.getFK(\n        this.prepareJointFK(1, this.joint_1, props.fk, props.lengths)\n      );\n      this.leg_2 = this.bot.getFK(\n        this.prepareJointFK(2, this.joint_2, props.fk, props.lengths)\n      );\n      this.leg_3 = this.bot.getFK(\n        this.prepareJointFK(3, this.joint_3, props.fk, props.lengths)\n      );\n      this.leg_4 = this.bot.getFK(\n        this.prepareJointFK(4, this.joint_4, props.fk, props.lengths)\n      );\n    } else {\n      this.leg_1 = this.bot.getFK(\n        this.preapreJointIK(\n          1,\n          this.joint_1,\n          this.bot.getIK(\n            props.ik[0][0],\n            props.ik[0][1],\n            props.ik[0][2] || props.frameCount,\n            this.joint_1\n          )\n        )\n      );\n\n      this.leg_2 = this.bot.getFK(\n        this.preapreJointIK(\n          2,\n          this.joint_2,\n          this.bot.getIK(\n            props.ik[1][0],\n            props.ik[1][1],\n            props.ik[1][2],\n            this.joint_2\n          )\n        )\n      );\n\n      this.leg_3 = this.bot.getFK(\n        this.preapreJointIK(\n          3,\n          this.joint_3,\n          this.bot.getIK(\n            props.ik[2][0],\n            props.ik[2][1],\n            props.ik[2][2],\n            this.joint_3\n          )\n        )\n      );\n\n      this.leg_4 = this.bot.getFK(\n        this.preapreJointIK(\n          4,\n          this.joint_4,\n          this.bot.getIK(\n            props.ik[3][0],\n            props.ik[3][1],\n            props.ik[3][2],\n            this.joint_4\n          )\n        )\n      );\n    }\n\n    this.state = {\n      bodyDimension: this.bot.getRobotBody(props.radius),\n      showCogVectorTrace: false,\n      endEffectorPoints: [],\n      showCogPoints: false,\n      showBodyCogVectorTrace: false,\n    };\n  }\n\n  componentDidMount() {\n    // if (this.props.choice === \"IK\") {\n    //   for (let i = 0; i < 100; i++) {\n    //     this.leg_1 = this.bot.getFK(\n    //       this.preapreJointIK(\n    //         1,\n    //         this.joint_1,\n    //         this.bot.getIK(\n    //           this.props.ik[0][0],\n    //           this.props.ik[0][1],\n    //           i,\n    //           this.joint_1\n    //         ),\n    //         this.props.lengths\n    //       )\n    //     );\n    //   }\n    // }\n  }\n\n  preapreJointIK = (leg, joint, prop, length) => {\n    switch (leg) {\n      case 1: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      case 2: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      case 3: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      case 4: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      default: {\n      }\n    }\n    return joint;\n  };\n\n  deg2rad(degrees) {\n    var pi = Math.PI;\n    return degrees * (pi / 180);\n  }\n\n  prepareJointFK = (leg, joint, props, length) => {\n    switch (leg) {\n      case 1: {\n        joint.theta_1 = -joint.deg2rad(props[0][0]);\n        joint.theta_2 = -joint.deg2rad(180 - props[0][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[0][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n\n      case 2: {\n        joint.theta_1 = -joint.deg2rad(180 - props[1][0]);\n        joint.theta_2 = -joint.deg2rad(180 - props[1][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[1][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n\n      case 3: {\n        joint.theta_1 = -joint.deg2rad(props[2][0] - 180);\n        joint.theta_2 = -joint.deg2rad(180 - props[2][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[2][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n\n      case 4: {\n        joint.theta_1 = -joint.deg2rad(props[3][0] - 180);\n        joint.theta_2 = -joint.deg2rad(180 - props[3][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[3][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n    }\n    return joint;\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      bodyDimension: this.bot.getRobotBody(nextProps.radius),\n      showCogVectorTrace: nextProps.showCogVectorTrace,\n      showBodyCogVectorTrace: nextProps.showBodyCogVectorTrace,\n      showCogPoints: nextProps.showCogPoints,\n    });\n\n    if (nextProps.choice) {\n      this.leg_1 = this.bot.getFK(\n        this.prepareJointFK(1, this.joint_1, nextProps.fk, nextProps.lengths)\n      );\n      this.leg_2 = this.bot.getFK(\n        this.prepareJointFK(2, this.joint_2, nextProps.fk, nextProps.lengths)\n      );\n      this.leg_3 = this.bot.getFK(\n        this.prepareJointFK(3, this.joint_3, nextProps.fk, nextProps.lengths)\n      );\n      this.leg_4 = this.bot.getFK(\n        this.prepareJointFK(4, this.joint_4, nextProps.fk, nextProps.lengths)\n      );\n\n      this.endEffectorPoints = [\n        [\n          this.leg_1[2][0] - nextProps.translations.transX,\n          -this.leg_1[2][1] - nextProps.translations.transY,\n          -this.leg_1[2][2] - nextProps.translations.transZ,\n        ],\n        [\n          this.leg_2[2][0] - nextProps.translations.transX,\n          -this.leg_2[2][1] - nextProps.translations.transY,\n          -this.leg_2[2][2] - nextProps.translations.transZ,\n        ],\n        [\n          this.leg_3[2][0] - nextProps.translations.transX,\n          -this.leg_3[2][1] - nextProps.translations.transY,\n          -this.leg_3[2][2] - nextProps.translations.transZ,\n        ],\n        [\n          this.leg_4[2][0] - nextProps.translations.transX,\n          -this.leg_4[2][1] - nextProps.translations.transY,\n          -this.leg_4[2][2] - nextProps.translations.transZ,\n        ],\n      ];\n    } else {\n      this.endEffectorPoints = [\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[0][0],\n            y: nextProps.ik[0][1],\n            z: nextProps.ik[0][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[0][0],\n            y: nextProps.ik[0][1],\n            z: nextProps.ik[0][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[0][0],\n            y: nextProps.ik[0][1],\n            z: nextProps.ik[0][2],\n          }).z - nextProps.translations.transZ,\n        ],\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[1][0],\n            y: nextProps.ik[1][1],\n            z: nextProps.ik[1][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[1][0],\n            y: nextProps.ik[1][1],\n            z: nextProps.ik[1][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[1][0],\n            y: nextProps.ik[1][1],\n            z: nextProps.ik[1][2],\n          }).z - nextProps.translations.transZ,\n        ],\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[2][0],\n            y: nextProps.ik[2][1],\n            z: nextProps.ik[2][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[2][0],\n            y: nextProps.ik[2][1],\n            z: nextProps.ik[2][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[2][0],\n            y: nextProps.ik[2][1],\n            z: nextProps.ik[2][2],\n          }).z - nextProps.translations.transZ,\n        ],\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[3][0],\n            y: nextProps.ik[3][1],\n            z: nextProps.ik[3][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[3][0],\n            y: nextProps.ik[3][1],\n            z: nextProps.ik[3][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[3][0],\n            y: nextProps.ik[3][1],\n            z: nextProps.ik[3][2],\n          }).z - nextProps.translations.transZ,\n        ],\n      ];\n\n      this.leg_1 = this.bot.getFK(\n        this.preapreJointIK(\n          1,\n          this.joint_1,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[0][0],\n              y: nextProps.ik[0][1],\n              z: nextProps.ik[0][2],\n            }).x - nextProps.translations.transX,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[0][0],\n              y: nextProps.ik[0][1],\n              z: nextProps.ik[0][2],\n            }).y - nextProps.translations.transY,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[0][0],\n              y: nextProps.ik[0][1],\n              z: nextProps.ik[0][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_1\n          ),\n          nextProps.lengths\n        )\n      );\n\n      this.leg_2 = this.bot.getFK(\n        this.preapreJointIK(\n          2,\n          this.joint_2,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[1][0],\n              y: nextProps.ik[1][1],\n              z: nextProps.ik[1][2],\n            }).x - nextProps.translations.transX,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[1][0],\n              y: nextProps.ik[1][1],\n              z: nextProps.ik[1][2],\n            }).y - nextProps.translations.transY,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[1][0],\n              y: nextProps.ik[1][1],\n              z: nextProps.ik[1][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_2\n          ),\n          nextProps.lengths\n        )\n      );\n\n      this.leg_3 = this.bot.getFK(\n        this.preapreJointIK(\n          3,\n          this.joint_3,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[2][0],\n              y: nextProps.ik[2][1],\n              z: nextProps.ik[2][2],\n            }).x - nextProps.translations.transX,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[2][0],\n              y: nextProps.ik[2][1],\n              z: nextProps.ik[2][2],\n            }).y - nextProps.translations.transY,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[2][0],\n              y: nextProps.ik[2][1],\n              z: nextProps.ik[2][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_3\n          ),\n          nextProps.lengths\n        )\n      );\n\n      this.leg_4 = this.bot.getFK(\n        this.preapreJointIK(\n          4,\n          this.joint_4,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[3][0],\n              y: nextProps.ik[3][1],\n              z: nextProps.ik[3][2],\n            }).x - nextProps.translations.transX,\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[3][0],\n              y: nextProps.ik[3][1],\n              z: nextProps.ik[3][2],\n            }).y - nextProps.translations.transY,\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[3][0],\n              y: nextProps.ik[3][1],\n              z: nextProps.ik[3][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_4\n          ),\n          nextProps.lengths\n        )\n      );\n    }\n  }\n\n  handleRotation = (rotation, currentPoint) => {\n    let theta_1 = this.deg2rad(rotation.rotX);\n    let theta_2 = this.deg2rad(rotation.rotY);\n    let theta_3 = this.deg2rad(rotation.rotZ);\n\n    let x = currentPoint.x;\n    let y = currentPoint.y;\n    let z = currentPoint.z;\n\n    let rotationMatrix = [\n      y *\n        (Math.cos(theta_1) * Math.sin(theta_3) +\n          Math.cos(theta_3) * Math.sin(theta_1) * Math.sin(theta_2)) +\n        z *\n          (Math.sin(theta_1) * Math.sin(theta_3) -\n            Math.cos(theta_1) * Math.cos(theta_3) * Math.sin(theta_2)) +\n        x * Math.cos(theta_2) * Math.cos(theta_3),\n      y *\n        (Math.cos(theta_1) * Math.cos(theta_3) -\n          Math.sin(theta_1) * Math.sin(theta_2) * Math.sin(theta_3)) +\n        z *\n          (Math.cos(theta_3) * Math.sin(theta_1) +\n            Math.cos(theta_1) * Math.sin(theta_2) * Math.sin(theta_3)) -\n        x * Math.cos(theta_2) * Math.sin(theta_3),\n      x * Math.sin(theta_2) +\n        z * Math.cos(theta_1) * Math.cos(theta_2) -\n        y * Math.cos(theta_2) * Math.sin(theta_1),\n    ];\n\n    return { x: rotationMatrix[0], y: rotationMatrix[1], z: rotationMatrix[2] };\n  };\n\n  getGeneratedMesh = () => {\n    let mesh = {\n      x: [\n        this.endEffectorPoints[0][0],\n        this.endEffectorPoints[1][0],\n        this.endEffectorPoints[2][0],\n        this.endEffectorPoints[3][0],\n      ],\n      y: [\n        -this.endEffectorPoints[0][1],\n        -this.endEffectorPoints[1][1],\n        -this.endEffectorPoints[2][1],\n        -this.endEffectorPoints[3][1],\n      ],\n      z: [\n        -this.endEffectorPoints[0][2],\n        -this.endEffectorPoints[1][2],\n        -this.endEffectorPoints[2][2],\n        -this.endEffectorPoints[3][2],\n      ],\n    };\n    return mesh;\n  };\n\n  getCOMVector = (leg, joint, point) => {\n    joint.link_1_mass = 250 / 1000;\n    joint.link_2_mass = 250 / 1000;\n    joint.link_3_mass = 350 / 1000;\n    joint.total_mass =\n      joint.link_1_mass + joint.link_2_mass + joint.link_3_mass;\n    let x_0 = leg[0][point];\n    let x_1 = leg[1][point];\n    let x_2 = leg[2][point];\n\n    let points =\n      (joint.link_1_mass * x_0 +\n        joint.link_2_mass * x_1 +\n        joint.link_3_mass * x_2) /\n      joint.total_mass;\n\n    return points;\n  };\n\n  getCOMPoint = (points, joint) => {\n    joint[0].total_mass = 0.25 + 0.25 + 0.35;\n    joint[1].total_mass = 0.25 + 0.25 + 0.35;\n    joint[2].total_mass = 0.25 + 0.25 + 0.35;\n    joint[3].total_mass = 0.25 + 0.25 + 0.35;\n\n    let total_centre_of_mass =\n      (points[0] * joint[0].total_mass +\n        points[1] * joint[1].total_mass +\n        points[2] * joint[2].total_mass +\n        points[3] * joint[3].total_mass) /\n        joint[0].total_mass +\n      joint[1].total_mass +\n      joint[2].total_mass +\n      joint[3].total_mass;\n\n    return total_centre_of_mass / 4;\n  };\n\n  render() {\n    return (\n      <Container>\n        <Plot\n          data={[\n            {\n              x: this.state.bodyDimension.x,\n              y: this.state.bodyDimension.y,\n              z: this.state.bodyDimension.z,\n              type: \"mesh3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 1\n              x: [0, this.leg_1[0][0], this.leg_1[1][0], this.leg_1[2][0]],\n              y: [0, this.leg_1[0][1], this.leg_1[1][1], this.leg_1[2][1]],\n              z: [0, this.leg_1[0][2], this.leg_1[1][2], this.leg_1[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Reds\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 2\n              x: [0, this.leg_2[0][0], this.leg_2[1][0], this.leg_2[2][0]],\n              y: [0, this.leg_2[0][1], this.leg_2[1][1], this.leg_2[2][1]],\n              z: [0, this.leg_2[0][2], this.leg_2[1][2], this.leg_2[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 3\n              x: [0, this.leg_3[0][0], this.leg_3[1][0], this.leg_3[2][0]],\n              y: [0, this.leg_3[0][1], this.leg_3[1][1], this.leg_3[2][1]],\n              z: [0, this.leg_3[0][2], this.leg_3[1][2], this.leg_3[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 4\n              x: [0, this.leg_4[0][0], this.leg_4[1][0], this.leg_4[2][0]],\n              y: [0, this.leg_4[0][1], this.leg_4[1][1], this.leg_4[2][1]],\n              z: [0, this.leg_4[0][2], this.leg_4[1][2], this.leg_4[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 1 CG POINTS\n              x: this.state.showCogVectorTrace\n                ? [\n                    0,\n                    this.leg_1[0][0],\n                    0,\n                    this.leg_1[1][0],\n                    0,\n                    this.leg_1[2][0],\n                    0,\n                    this.leg_2[0][0],\n                    0,\n                    this.leg_2[1][0],\n                    0,\n                    this.leg_2[2][0],\n                    0,\n                    this.leg_3[0][0],\n                    0,\n                    this.leg_3[1][0],\n                    0,\n                    this.leg_3[2][0],\n                    0,\n                    this.leg_4[0][0],\n                    0,\n                    this.leg_4[1][0],\n                    0,\n                    this.leg_4[2][0],\n                  ]\n                : [],\n              y: this.state.showCogVectorTrace\n                ? [\n                    0,\n                    this.leg_1[0][1],\n                    0,\n                    this.leg_1[1][1],\n                    0,\n                    this.leg_1[2][1],\n                    0,\n                    this.leg_2[0][1],\n                    0,\n                    this.leg_2[1][1],\n                    0,\n                    this.leg_2[2][1],\n                    0,\n                    this.leg_3[0][1],\n                    0,\n                    this.leg_3[1][1],\n                    0,\n                    this.leg_3[2][1],\n                    0,\n                    this.leg_4[0][1],\n                    0,\n                    this.leg_4[1][1],\n                    0,\n                    this.leg_4[2][1],\n                  ]\n                : [],\n              z: this.state.showCogVectorTrace\n                ? [\n                    0,\n                    this.leg_1[0][2],\n                    0,\n                    this.leg_1[1][2],\n                    0,\n                    this.leg_1[2][2],\n                    0,\n                    this.leg_2[0][2],\n                    0,\n                    this.leg_2[1][2],\n                    0,\n                    this.leg_2[2][2],\n                    0,\n                    this.leg_3[0][2],\n                    0,\n                    this.leg_3[1][2],\n                    0,\n                    this.leg_3[2][2],\n                    0,\n                    this.leg_4[0][2],\n                    0,\n                    this.leg_4[1][2],\n                    0,\n                    this.leg_4[2][2],\n                  ]\n                : [],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 3,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Reds\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              x: this.state.showCogPoints\n                ? [\n                    this.getCOMVector(this.leg_1, this.joint_1, 0),\n                    this.getCOMVector(this.leg_2, this.joint_2, 0),\n                    this.getCOMVector(this.leg_3, this.joint_3, 0),\n                    this.getCOMVector(this.leg_4, this.joint_4, 0),\n                  ]\n                : [],\n              y: this.state.showCogPoints\n                ? [\n                    this.getCOMVector(this.leg_1, this.joint_1, 1),\n                    this.getCOMVector(this.leg_2, this.joint_2, 1),\n                    this.getCOMVector(this.leg_3, this.joint_3, 1),\n                    this.getCOMVector(this.leg_4, this.joint_4, 1),\n                  ]\n                : [],\n              z: this.state.showCogPoints\n                ? [\n                    this.getCOMVector(this.leg_1, this.joint_1, 2),\n                    this.getCOMVector(this.leg_2, this.joint_2, 2),\n                    this.getCOMVector(this.leg_3, this.joint_3, 2),\n                    this.getCOMVector(this.leg_4, this.joint_4, 2),\n                  ]\n                : [],\n              mode: \"markers\",\n              type: \"scatter3d\",\n              marker: {\n                color: \"rgba(255, 0, 0, 0.8)\",\n                size: 4,\n              },\n            },\n\n            {\n              x: this.state.showCogPoints\n                ? [\n                    0,\n                    this.getCOMPoint(\n                      [\n                        this.getCOMVector(this.leg_1, this.joint_1, 0),\n                        this.getCOMVector(this.leg_2, this.joint_2, 0),\n                        this.getCOMVector(this.leg_3, this.joint_3, 0),\n                        this.getCOMVector(this.leg_4, this.joint_4, 0),\n                      ],\n                      [this.joint_1, this.joint_2, this.joint_3, this.joint_4]\n                    ),\n                  ]\n                : [],\n              y: this.state.showCogPoints\n                ? [\n                    0,\n                    this.getCOMPoint(\n                      [\n                        this.getCOMVector(this.leg_1, this.joint_1, 1),\n                        this.getCOMVector(this.leg_2, this.joint_2, 1),\n                        this.getCOMVector(this.leg_3, this.joint_3, 1),\n                        this.getCOMVector(this.leg_4, this.joint_4, 1),\n                      ],\n                      [this.joint_1, this.joint_2, this.joint_3, this.joint_4]\n                    ),\n                  ]\n                : [],\n\n              z: this.state.showCogPoints\n                ? [\n                    0,\n                    this.getCOMPoint(\n                      [\n                        this.getCOMVector(this.leg_1, this.joint_1, 2),\n                        this.getCOMVector(this.leg_2, this.joint_2, 2),\n                        this.getCOMVector(this.leg_3, this.joint_3, 2),\n                        this.getCOMVector(this.leg_4, this.joint_4, 2),\n                      ],\n                      [this.joint_1, this.joint_2, this.joint_3, this.joint_4]\n                    ),\n                  ]\n                : [],\n              mode: \"lines+markers\",\n              type: \"scatter3d\",\n              marker: {\n                color: \"rgba(0, 0, 255, 0.8)\",\n                size: 4,\n              },\n            },\n            {\n              x: this.props.showMesh ? this.getGeneratedMesh().x : [0],\n              y: this.props.showMesh ? this.getGeneratedMesh().y : [0],\n              z: this.props.showMesh ? this.getGeneratedMesh().z : [0],\n              color: \"rgb(300,100,200)\",\n              type: \"mesh3d\",\n              opacity: 0.3,\n            },\n          ]}\n          layout={{\n            autosize: false,\n            height: 999,\n            width: 1080,\n            scene: {\n              aspectmode: \"manual\",\n              aspectratio: {\n                x: 1,\n                y: 1,\n                z: 1,\n              },\n              xaxis: {\n                nticks: 9,\n                range: [-350, 350],\n              },\n              yaxis: {\n                nticks: 7,\n                range: [-350, 350],\n              },\n              zaxis: {\n                nticks: 10,\n                range: [-350, 350],\n              },\n            },\n\n            legend: {\n              bgcolor: \"#ffffff1c\",\n              orientation: \"h\",\n              font: {\n                color: \"black\",\n                family: \"Montserrat\",\n              },\n            },\n            title: {\n              text: \"Quadruped Simulation\",\n              font: {\n                family: \"Montserrat\",\n                size: 24,\n                color: \"black\",\n              },\n\n              xref: \"paper\",\n            },\n          }}\n          frames={[\n            {\n              // LEG 1\n              x: [0, this.leg_1[0][0], this.leg_1[1][0], this.leg_1[2][0]],\n              y: [0, this.leg_1[0][1], this.leg_1[1][1], this.leg_1[2][1]],\n              z: [0, this.leg_1[0][2], this.leg_1[1][2], this.leg_1[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Reds\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n          ]}\n        />\n      </Container>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}